common:
  tags:
    - bluetooth
  platform_allow:
    - nrf52_bsim/native
  harness: bsim
  timeout: 60
  harness_config:
    bsim_verbosity: 2
    bsim_sim_length: 60e6
    bsim_test_ids:
      - central
      - peripheral
    bsim_options:
      - -flash_rm
      - -RealEncryption=1

tests:
  bluetooth.host.gatt.ccc_store:
    harness_config:
      bsim_exe_name:
        - tests_bsim_bluetooth_host_gatt_ccc_store_prj_conf
      bsim_options:
        - '["-flash=ccc_store_client.log.bin", "-flash=ccc_store_server.log.bin"]'
        - -argstest
        - '10'
  bluetooth.host.gatt.ccc_store_no_store_on_write:
    harness_config:
      bsim_exe_name:
        - tests_bsim_bluetooth_host_gatt_ccc_store_overlay-no_store_on_write_conf
      bsim_options:
        - '["-flash=ccc_no_store_on_write_client.log.bin",
            "-flash=ccc_no_store_on_write_server.log.bin"]'
        - -argstest
        - '10'
    extra_args:
      EXTRA_CONF_FILE=overlay-no_store_on_write.conf
  bluetooth.host.gatt.ccc_store_no_long_wq:
    harness_config:
      bsim_exe_name:
        - tests_bsim_bluetooth_host_gatt_ccc_store_overlay-no_long_wq_conf
      bsim_options:
        - '["-flash=ccc_store_no_long_wq_client.log.bin",
            "-flash=ccc_store_no_long_wq_server.log.bin"]'
        - -argstest
        - '10'
    extra_args:
      EXTRA_CONF_FILE=overlay-no_long_wq.conf
