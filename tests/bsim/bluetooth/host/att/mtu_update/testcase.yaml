common:
  tags:
    - bluetooth
  platform_allow:
    - nrf52_bsim/native
  harness: bsim
  timeout: 5

tests:
  bluetooth.host.att.mtu_update.build_central:
    build_only: true
    harness_config:
      bsim_exe_name:
        - tests_bsim_bluetooth_host_att_mtu_update_prj_central_conf
    extra_args:
      CONF_FILE=prj_central.conf
  bluetooth.host.att.mtu_update.build_peripheral:
    build_only: true
    harness_config:
      bsim_exe_name:
        - tests_bsim_bluetooth_host_att_mtu_update_prj_peripheral_conf
    extra_args:
      CONF_FILE=prj_peripheral.conf
  bluetooth.host.att.mtu_update.test:
    no_build: true
    harness_config:
      bsim_exe_name:
        - tests_bsim_bluetooth_host_att_mtu_update_prj_central_conf
        - tests_bsim_bluetooth_host_att_mtu_update_prj_peripheral_conf
      bsim_verbosity: 2
      bsim_sim_length: 60e6
      bsim_test_ids:
        - central
        - peripheral
      bsim_options:
        - -RealEncryption=1
      bsim_phy_options:
        - -argschannel
        - -at=40
